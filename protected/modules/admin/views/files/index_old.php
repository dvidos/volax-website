<?php	$dir = Yii::app()->request->getParam('dir', '');	$pattern = 'files/' . $dir . '/';	$pattern = str_replace('//', '/', $pattern);	$pattern_len = strlen($pattern);	$files = glob($pattern . '*');		// folders always at root	$root_folders = glob('files/*', GLOB_ONLYDIR); 		$left_html = '';	$left_html .= '<h3>Folders</h3>';	$left_html .= CHtml::link('Files', array('/admin/files')) . '<br />';	foreach ($root_folders as $root_folder)	{		// remove the "files/" in front		$entry = substr($root_folder, 6);		$left_html .= '- ' . CHtml::link($entry, array('/admin/files', 'dir'=>$entry)) . '<br />';	}			$files_count = 0;	$files_size = 0;	$files_table = '';	$files_table .= '<table class="bordered" width="100%">';	foreach ($files as $file)	{		if (is_dir($file))			continue;				$name = substr($file, $pattern_len);		$size = filesize($file);				$files_table .= '<tr>';		$files_table .= '<td>' . CHtml::link($name, Yii::app()->baseUrl . '/' . $file) . '</td>';		$files_table .= '<td style="text-align: right;">' . Yii::app()->format->size($size) . '</td>';		$files_table .= '<td>' . CHtml::image(Yii::app()->baseUrl . '/assets/images/actions/rename.png') . '</td>';		$files_table .= '<td>' . CHtml::image(Yii::app()->baseUrl . '/assets/images/actions/delete.png') . '</td>';		$files_table .= '</tr>';		$files_table .= "\r\n";						$files_count++;		$files_size += $size;	}	$files_table .= '</table>';		$right_html = '';	$right_html .= '<h3>Files in ' . (($dir == '') ? 'root' : CHtml::encode($dir)) . '</h3>';	$right_html .= '<p>Total ' . $files_count . ' files, ' . Yii::app()->format->size($files_size) . '</p>';	$right_html .= $files_table;?><div style="float:left;width:33%;">	<?php echo $left_html; ?></div><div style="float:right;width:65%;">	<?php echo $right_html; ?></div><div style="clear:both;"></div>