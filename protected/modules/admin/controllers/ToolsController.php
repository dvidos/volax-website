<?phpclass ToolsController extends Controller{	function actionIndex()	{		$this->render('index', array(			'xml_sitemap_filename' => $this->getSitemapFilename(),			'xml_sitemap_url' => $this->getSitemapUrl(),		));	}		function actionXmlSitemap()	{		$posts = Post::model()->findAll(array(			'condition'=>'status = '.Post::STATUS_PUBLISHED,			'order'=>'create_time DESC',		));				$categories = Category::model()->findAll(array(			'condition'=>'status = '.Category::STATUS_PUBLISHED,			'order'=>'parent_id, view_order',		));				$xml = $this->renderPartial('xmlSitemap', array(			'posts'=>$posts,			'categories'=>$categories,		), true);				$filename = $this->getSitemapFilename();		$result = file_put_contents($filename, $xml);		Yii::app()->user->setFlash('xmlSitemap','Δημιουργία αρχείου ' . $filename . ': ' . ($result === false ? 'Σφάλμα!' : 'Επιτυχής!'));		$this->redirect(array('/admin/tools'));	}		/**	 * filename to save the xml sitemap for google and other search engines.	 */	function getSitemapFilename()	{		return dirname(Yii::app()->basePath) . '/sitemap.xml';	}	function getSitemapUrl()	{		return Yii::app()->baseUrl . '/sitemap.xml';	}}